{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/rachitgupta/Desktop/BlogApp/client/lib/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:7777/api';\n\n// Create axios instance with CORS-friendly configuration\nconst apiClient = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json'\n  },\n  withCredentials: true, // Include cookies in requests\n  timeout: 10000 // 10 second timeout\n});\n\n// Request interceptor to add authorization token\napiClient.interceptors.request.use(\n  (config) => {\n    const token = typeof window !== 'undefined' ? localStorage.getItem('authToken') : null;\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor for error handling\napiClient.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response?.status === 401) {\n      // Clear token if unauthorized\n      if (typeof window !== 'undefined') {\n        localStorage.removeItem('authToken');\n      }\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport const authAPI = {\n  signup: async (email, password, displayName) => {\n    try {\n      const response = await apiClient.post('/auth/signup', {\n        email,\n        password,\n        displayName\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Signup error:', error.response?.data || error.message);\n      throw new Error(error.response?.data?.message || 'Signup failed');\n    }\n  },\n\n  signin: async (email, password) => {\n    try {\n      const response = await apiClient.post('/auth/signin', {\n        email,\n        password\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Signin error:', error.response?.data || error.message);\n      throw new Error(error.response?.data?.message || 'Signin failed');\n    }\n  },\n\n  getCurrentUser: async (token) => {\n    try {\n      const response = await apiClient.get('/auth/me', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Get user error:', error.response?.data || error.message);\n      throw new Error(error.response?.data?.message || 'Failed to fetch user');\n    }\n  },\n\n  updateProfile: async (token, displayName, photoURL) => {\n    try {\n      const response = await apiClient.put('/auth/profile', {\n        displayName,\n        photoURL\n      }, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Update profile error:', error.response?.data || error.message);\n      throw new Error(error.response?.data?.message || 'Failed to update profile');\n    }\n  }\n};\n"],"names":[],"mappings":";;;AAEgB;AAFhB;;AAEA,MAAM,UAAU,+EAAmC;AAEnD,yDAAyD;AACzD,MAAM,YAAY,wIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IAC7B,SAAS;IACT,SAAS;QACP,gBAAgB;QAChB,UAAU;IACZ;IACA,iBAAiB;IACjB,SAAS,MAAM,oBAAoB;AACrC;AAEA,iDAAiD;AACjD,UAAU,YAAY,CAAC,OAAO,CAAC,GAAG,CAChC,CAAC;IACC,MAAM,QAAQ,uCAAgC,aAAa,OAAO,CAAC;IACnE,IAAI,OAAO;QACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAClD;IACA,OAAO;AACT,GACA,CAAC;IACC,OAAO,QAAQ,MAAM,CAAC;AACxB;AAGF,0CAA0C;AAC1C,UAAU,YAAY,CAAC,QAAQ,CAAC,GAAG,CACjC,CAAC,WAAa,UACd,CAAC;IACC,IAAI,MAAM,QAAQ,EAAE,WAAW,KAAK;QAClC,8BAA8B;QAC9B,wCAAmC;YACjC,aAAa,UAAU,CAAC;QAC1B;IACF;IACA,OAAO,QAAQ,MAAM,CAAC;AACxB;AAGK,MAAM,UAAU;IACrB,QAAQ,OAAO,OAAO,UAAU;QAC9B,IAAI;YACF,MAAM,WAAW,MAAM,UAAU,IAAI,CAAC,gBAAgB;gBACpD;gBACA;gBACA;YACF;YACA,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iBAAiB,MAAM,QAAQ,EAAE,QAAQ,MAAM,OAAO;YACpE,MAAM,IAAI,MAAM,MAAM,QAAQ,EAAE,MAAM,WAAW;QACnD;IACF;IAEA,QAAQ,OAAO,OAAO;QACpB,IAAI;YACF,MAAM,WAAW,MAAM,UAAU,IAAI,CAAC,gBAAgB;gBACpD;gBACA;YACF;YACA,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iBAAiB,MAAM,QAAQ,EAAE,QAAQ,MAAM,OAAO;YACpE,MAAM,IAAI,MAAM,MAAM,QAAQ,EAAE,MAAM,WAAW;QACnD;IACF;IAEA,gBAAgB,OAAO;QACrB,IAAI;YACF,MAAM,WAAW,MAAM,UAAU,GAAG,CAAC,YAAY;gBAC/C,SAAS;oBACP,iBAAiB,CAAC,OAAO,EAAE,OAAO;gBACpC;YACF;YACA,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,mBAAmB,MAAM,QAAQ,EAAE,QAAQ,MAAM,OAAO;YACtE,MAAM,IAAI,MAAM,MAAM,QAAQ,EAAE,MAAM,WAAW;QACnD;IACF;IAEA,eAAe,OAAO,OAAO,aAAa;QACxC,IAAI;YACF,MAAM,WAAW,MAAM,UAAU,GAAG,CAAC,iBAAiB;gBACpD;gBACA;YACF,GAAG;gBACD,SAAS;oBACP,iBAAiB,CAAC,OAAO,EAAE,OAAO;gBACpC;YACF;YACA,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,yBAAyB,MAAM,QAAQ,EAAE,QAAQ,MAAM,OAAO;YAC5E,MAAM,IAAI,MAAM,MAAM,QAAQ,EAAE,MAAM,WAAW;QACnD;IACF;AACF","debugId":null}},
    {"offset": {"line": 109, "column": 0}, "map": {"version":3,"sources":["file:///Users/rachitgupta/Desktop/BlogApp/client/hooks/useAuth.js"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, createContext, useContext } from 'react';\nimport { authAPI } from '../lib/api';\n\nconst AuthContext = createContext();\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n\nexport const AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [token, setToken] = useState(null);\n\n  // Load user from localStorage on mount\n  useEffect(() => {\n    const storedToken = localStorage.getItem('authToken');\n    const storedUser = localStorage.getItem('user');\n    \n    if (storedToken && storedUser) {\n      try {\n        setToken(storedToken);\n        setUser(JSON.parse(storedUser));\n      } catch (error) {\n        localStorage.removeItem('authToken');\n        localStorage.removeItem('user');\n      }\n    }\n    \n    setLoading(false);\n  }, []);\n\n  // Email/Password Sign Up\n  const signUp = async (email, password, displayName) => {\n    try {\n      const result = await authAPI.signup(email, password, displayName);\n      \n      if (result.success) {\n        localStorage.setItem('authToken', result.token);\n        localStorage.setItem('user', JSON.stringify(result.user));\n        setToken(result.token);\n        setUser(result.user);\n        return { success: true, user: result.user };\n      }\n      \n      return { success: false, error: result.message };\n    } catch (error) {\n      return { success: false, error: error.message };\n    }\n  };\n\n  // Email/Password Sign In\n  const signIn = async (email, password) => {\n    try {\n      const result = await authAPI.signin(email, password);\n      \n      if (result.success) {\n        localStorage.setItem('authToken', result.token);\n        localStorage.setItem('user', JSON.stringify(result.user));\n        setToken(result.token);\n        setUser(result.user);\n        return { success: true, user: result.user };\n      }\n      \n      return { success: false, error: result.message };\n    } catch (error) {\n      return { success: false, error: error.message };\n    }\n  };\n\n  // Sign Out\n  const logout = async () => {\n    try {\n      localStorage.removeItem('authToken');\n      localStorage.removeItem('user');\n      setToken(null);\n      setUser(null);\n      return { success: true };\n    } catch (error) {\n      return { success: false, error: error.message };\n    }\n  };\n\n  const value = {\n    user,\n    loading,\n    token,\n    signUp,\n    signIn,\n    logout\n  };\n\n  return (\n    <AuthContext.Provider value={value}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKA,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,gBAAa,AAAD;AAEzB,MAAM,UAAU;;IACrB,MAAM,UAAU,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;GANa;AAQN,MAAM,eAAe,CAAC,EAAE,QAAQ,EAAE;;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEnC,uCAAuC;IACvC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,MAAM,cAAc,aAAa,OAAO,CAAC;YACzC,MAAM,aAAa,aAAa,OAAO,CAAC;YAExC,IAAI,eAAe,YAAY;gBAC7B,IAAI;oBACF,SAAS;oBACT,QAAQ,KAAK,KAAK,CAAC;gBACrB,EAAE,OAAO,OAAO;oBACd,aAAa,UAAU,CAAC;oBACxB,aAAa,UAAU,CAAC;gBAC1B;YACF;YAEA,WAAW;QACb;iCAAG,EAAE;IAEL,yBAAyB;IACzB,MAAM,SAAS,OAAO,OAAO,UAAU;QACrC,IAAI;YACF,MAAM,SAAS,MAAM,6GAAA,CAAA,UAAO,CAAC,MAAM,CAAC,OAAO,UAAU;YAErD,IAAI,OAAO,OAAO,EAAE;gBAClB,aAAa,OAAO,CAAC,aAAa,OAAO,KAAK;gBAC9C,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC,OAAO,IAAI;gBACvD,SAAS,OAAO,KAAK;gBACrB,QAAQ,OAAO,IAAI;gBACnB,OAAO;oBAAE,SAAS;oBAAM,MAAM,OAAO,IAAI;gBAAC;YAC5C;YAEA,OAAO;gBAAE,SAAS;gBAAO,OAAO,OAAO,OAAO;YAAC;QACjD,EAAE,OAAO,OAAO;YACd,OAAO;gBAAE,SAAS;gBAAO,OAAO,MAAM,OAAO;YAAC;QAChD;IACF;IAEA,yBAAyB;IACzB,MAAM,SAAS,OAAO,OAAO;QAC3B,IAAI;YACF,MAAM,SAAS,MAAM,6GAAA,CAAA,UAAO,CAAC,MAAM,CAAC,OAAO;YAE3C,IAAI,OAAO,OAAO,EAAE;gBAClB,aAAa,OAAO,CAAC,aAAa,OAAO,KAAK;gBAC9C,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC,OAAO,IAAI;gBACvD,SAAS,OAAO,KAAK;gBACrB,QAAQ,OAAO,IAAI;gBACnB,OAAO;oBAAE,SAAS;oBAAM,MAAM,OAAO,IAAI;gBAAC;YAC5C;YAEA,OAAO;gBAAE,SAAS;gBAAO,OAAO,OAAO,OAAO;YAAC;QACjD,EAAE,OAAO,OAAO;YACd,OAAO;gBAAE,SAAS;gBAAO,OAAO,MAAM,OAAO;YAAC;QAChD;IACF;IAEA,WAAW;IACX,MAAM,SAAS;QACb,IAAI;YACF,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;YACxB,SAAS;YACT,QAAQ;YACR,OAAO;gBAAE,SAAS;YAAK;QACzB,EAAE,OAAO,OAAO;YACd,OAAO;gBAAE,SAAS;gBAAO,OAAO,MAAM,OAAO;YAAC;QAChD;IACF;IAEA,MAAM,QAAQ;QACZ;QACA;QACA;QACA;QACA;QACA;IACF;IAEA,qBACE,6LAAC,YAAY,QAAQ;QAAC,OAAO;kBAC1B;;;;;;AAGP;IAxFa;KAAA","debugId":null}}]
}
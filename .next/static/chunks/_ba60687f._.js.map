{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/rachitgupta/Desktop/BlogApp/client/lib/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:7777/api';\n\n// Create axios instance with CORS-friendly configuration\nconst apiClient = axios.create({\n  baseURL: API_URL,\n  timeout: 10000, // 10 second timeout\n  withCredentials: true, // Include cookies and credentials\n  headers: {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json',\n    'X-Requested-With': 'XMLHttpRequest' // Helps with CORS\n  }\n});\n\n// Request interceptor - add authorization token\napiClient.interceptors.request.use(\n  (config) => {\n    // Add token to Authorization header if it exists\n    if (typeof window !== 'undefined') {\n      const token = localStorage.getItem('authToken');\n      if (token) {\n        config.headers.Authorization = `Bearer ${token}`;\n      }\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor - handle errors\napiClient.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    // Handle 401 unauthorized - clear token and logout\n    if (error.response?.status === 401) {\n      if (typeof window !== 'undefined') {\n        localStorage.removeItem('authToken');\n        localStorage.removeItem('user');\n      }\n      // Optionally redirect to login\n      if (typeof window !== 'undefined' && window.location.pathname !== '/') {\n        // window.location.href = '/';\n      }\n    }\n    \n    // Log error details for debugging\n    console.error('API Error:', {\n      status: error.response?.status,\n      message: error.response?.data?.message || error.message,\n      url: error.config?.url\n    });\n    \n    return Promise.reject(error);\n  }\n);\n\nexport const authAPI = {\n  signup: async (email, password, displayName) => {\n    try {\n      const response = await apiClient.post('/auth/signup', {\n        email,\n        password,\n        displayName\n      });\n      \n      // Store token if provided\n      if (response.data.token && typeof window !== 'undefined') {\n        localStorage.setItem('authToken', response.data.token);\n        localStorage.setItem('user', JSON.stringify(response.data.user));\n      }\n      \n      return response.data;\n    } catch (error) {\n      const message = error.response?.data?.message || error.message || 'Signup failed';\n      console.error('Signup error:', message);\n      throw new Error(message);\n    }\n  },\n\n  signin: async (email, password) => {\n    try {\n      const response = await apiClient.post('/auth/signin', {\n        email,\n        password\n      });\n      \n      // Store token if provided\n      if (response.data.token && typeof window !== 'undefined') {\n        localStorage.setItem('authToken', response.data.token);\n        localStorage.setItem('user', JSON.stringify(response.data.user));\n      }\n      \n      return response.data;\n    } catch (error) {\n      const message = error.response?.data?.message || error.message || 'Signin failed';\n      console.error('Signin error:', message);\n      throw new Error(message);\n    }\n  },\n\n  getCurrentUser: async (token) => {\n    try {\n      const response = await apiClient.get('/auth/me', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      return response.data;\n    } catch (error) {\n      const message = error.response?.data?.message || error.message || 'Failed to fetch user';\n      console.error('Get user error:', message);\n      throw new Error(message);\n    }\n  },\n\n  updateProfile: async (token, displayName, photoURL) => {\n    try {\n      const response = await apiClient.put(\n        '/auth/profile',\n        { displayName, photoURL },\n        {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        }\n      );\n      \n      // Update stored user info\n      if (typeof window !== 'undefined') {\n        const user = JSON.parse(localStorage.getItem('user') || '{}');\n        user.displayName = displayName;\n        user.photoURL = photoURL;\n        localStorage.setItem('user', JSON.stringify(user));\n      }\n      \n      return response.data;\n    } catch (error) {\n      const message = error.response?.data?.message || error.message || 'Failed to update profile';\n      console.error('Update profile error:', message);\n      throw new Error(message);\n    }\n  },\n\n  logout: () => {\n    // Clear local storage\n    if (typeof window !== 'undefined') {\n      localStorage.removeItem('authToken');\n      localStorage.removeItem('user');\n    }\n  }\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":["file:///Users/rachitgupta/Desktop/BlogApp/client/hooks/useAuth.js"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, createContext, useContext } from 'react';\nimport { authAPI } from '../lib/api';\n\nconst AuthContext = createContext();\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n\nexport const AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [token, setToken] = useState(null);\n\n  // Load user from localStorage on mount\n  useEffect(() => {\n    const storedToken = localStorage.getItem('authToken');\n    const storedUser = localStorage.getItem('user');\n    \n    if (storedToken && storedUser) {\n      try {\n        setToken(storedToken);\n        setUser(JSON.parse(storedUser));\n      } catch (error) {\n        localStorage.removeItem('authToken');\n        localStorage.removeItem('user');\n      }\n    }\n    \n    setLoading(false);\n  }, []);\n\n  // Email/Password Sign Up\n  const signUp = async (email, password, displayName) => {\n    try {\n      const result = await authAPI.signup(email, password, displayName);\n      \n      if (result.success) {\n        localStorage.setItem('authToken', result.token);\n        localStorage.setItem('user', JSON.stringify(result.user));\n        setToken(result.token);\n        setUser(result.user);\n        return { success: true, user: result.user };\n      }\n      \n      return { success: false, error: result.message };\n    } catch (error) {\n      return { success: false, error: error.message };\n    }\n  };\n\n  // Email/Password Sign In\n  const signIn = async (email, password) => {\n    try {\n      const result = await authAPI.signin(email, password);\n      \n      if (result.success) {\n        localStorage.setItem('authToken', result.token);\n        localStorage.setItem('user', JSON.stringify(result.user));\n        setToken(result.token);\n        setUser(result.user);\n        return { success: true, user: result.user };\n      }\n      \n      return { success: false, error: result.message };\n    } catch (error) {\n      return { success: false, error: error.message };\n    }\n  };\n\n  // Sign Out\n  const logout = async () => {\n    try {\n      localStorage.removeItem('authToken');\n      localStorage.removeItem('user');\n      setToken(null);\n      setUser(null);\n      return { success: true };\n    } catch (error) {\n      return { success: false, error: error.message };\n    }\n  };\n\n  const value = {\n    user,\n    loading,\n    token,\n    signUp,\n    signIn,\n    logout\n  };\n\n  return (\n    <AuthContext.Provider value={value}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKA,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,gBAAa,AAAD;AAEzB,MAAM,UAAU;;IACrB,MAAM,UAAU,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;GANa;AAQN,MAAM,eAAe,CAAC,EAAE,QAAQ,EAAE;;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEnC,uCAAuC;IACvC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,MAAM,cAAc,aAAa,OAAO,CAAC;YACzC,MAAM,aAAa,aAAa,OAAO,CAAC;YAExC,IAAI,eAAe,YAAY;gBAC7B,IAAI;oBACF,SAAS;oBACT,QAAQ,KAAK,KAAK,CAAC;gBACrB,EAAE,OAAO,OAAO;oBACd,aAAa,UAAU,CAAC;oBACxB,aAAa,UAAU,CAAC;gBAC1B;YACF;YAEA,WAAW;QACb;iCAAG,EAAE;IAEL,yBAAyB;IACzB,MAAM,SAAS,OAAO,OAAO,UAAU;QACrC,IAAI;YACF,MAAM,SAAS,MAAM,6GAAA,CAAA,UAAO,CAAC,MAAM,CAAC,OAAO,UAAU;YAErD,IAAI,OAAO,OAAO,EAAE;gBAClB,aAAa,OAAO,CAAC,aAAa,OAAO,KAAK;gBAC9C,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC,OAAO,IAAI;gBACvD,SAAS,OAAO,KAAK;gBACrB,QAAQ,OAAO,IAAI;gBACnB,OAAO;oBAAE,SAAS;oBAAM,MAAM,OAAO,IAAI;gBAAC;YAC5C;YAEA,OAAO;gBAAE,SAAS;gBAAO,OAAO,OAAO,OAAO;YAAC;QACjD,EAAE,OAAO,OAAO;YACd,OAAO;gBAAE,SAAS;gBAAO,OAAO,MAAM,OAAO;YAAC;QAChD;IACF;IAEA,yBAAyB;IACzB,MAAM,SAAS,OAAO,OAAO;QAC3B,IAAI;YACF,MAAM,SAAS,MAAM,6GAAA,CAAA,UAAO,CAAC,MAAM,CAAC,OAAO;YAE3C,IAAI,OAAO,OAAO,EAAE;gBAClB,aAAa,OAAO,CAAC,aAAa,OAAO,KAAK;gBAC9C,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC,OAAO,IAAI;gBACvD,SAAS,OAAO,KAAK;gBACrB,QAAQ,OAAO,IAAI;gBACnB,OAAO;oBAAE,SAAS;oBAAM,MAAM,OAAO,IAAI;gBAAC;YAC5C;YAEA,OAAO;gBAAE,SAAS;gBAAO,OAAO,OAAO,OAAO;YAAC;QACjD,EAAE,OAAO,OAAO;YACd,OAAO;gBAAE,SAAS;gBAAO,OAAO,MAAM,OAAO;YAAC;QAChD;IACF;IAEA,WAAW;IACX,MAAM,SAAS;QACb,IAAI;YACF,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;YACxB,SAAS;YACT,QAAQ;YACR,OAAO;gBAAE,SAAS;YAAK;QACzB,EAAE,OAAO,OAAO;YACd,OAAO;gBAAE,SAAS;gBAAO,OAAO,MAAM,OAAO;YAAC;QAChD;IACF;IAEA,MAAM,QAAQ;QACZ;QACA;QACA;QACA;QACA;QACA;IACF;IAEA,qBACE,6LAAC,YAAY,QAAQ;QAAC,OAAO;kBAC1B;;;;;;AAGP;IAxFa;KAAA","debugId":null}}]
}
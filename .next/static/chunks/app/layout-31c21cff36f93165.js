(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{245:(e,t,s)=>{"use strict";s.d(t,{AuthProvider:()=>l,A:()=>c});var r=s(5155),a=s(2115);let o="http://localhost:7777/api",n={signup:async(e,t,s)=>{let r=await fetch("".concat(o,"/auth/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,displayName:s})}),a=await r.json();if(!r.ok)throw Error(a.message||"Signup failed");return a},signin:async(e,t)=>{let s=await fetch("".concat(o,"/auth/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),r=await s.json();if(!s.ok)throw Error(r.message||"Signin failed");return r}},u=(0,a.createContext)(),c=()=>{let e=(0,a.useContext)(u);if(!e)throw Error("useAuth must be used within an AuthProvider");return e},l=e=>{let{children:t}=e,[s,o]=(0,a.useState)(null),[c,l]=(0,a.useState)(!0),[i,h]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=localStorage.getItem("authToken"),t=localStorage.getItem("user");if(e&&t)try{h(e),o(JSON.parse(t))}catch(e){localStorage.removeItem("authToken"),localStorage.removeItem("user")}l(!1)},[]);let g=async(e,t,s)=>{try{let r=await n.signup(e,t,s);if(r.success)return localStorage.setItem("authToken",r.token),localStorage.setItem("user",JSON.stringify(r.user)),h(r.token),o(r.user),{success:!0,user:r.user};return{success:!1,error:r.message}}catch(e){return{success:!1,error:e.message}}},m=async(e,t)=>{try{let s=await n.signin(e,t);if(s.success)return localStorage.setItem("authToken",s.token),localStorage.setItem("user",JSON.stringify(s.user)),h(s.token),o(s.user),{success:!0,user:s.user};return{success:!1,error:s.message}}catch(e){return{success:!1,error:e.message}}},S=async()=>{try{return localStorage.removeItem("authToken"),localStorage.removeItem("user"),h(null),o(null),{success:!0}}catch(e){return{success:!1,error:e.message}}};return(0,r.jsx)(u.Provider,{value:{user:s,loading:c,token:i,signUp:g,signIn:m,logout:S},children:t})}},7262:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,9324,23)),Promise.resolve().then(s.bind(s,245)),Promise.resolve().then(s.t.bind(s,9461,23))},9324:()=>{},9461:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_f367f3"}}},e=>{var t=t=>e(e.s=t);e.O(0,[20,441,684,358],()=>t(7262)),_N_E=e.O()}]);